<body>
  <div id="login-section">
    <h2>Restricted Access</h2>
    <p>Please log in with your Google account.</p>
    <button onclick="signIn()">Login with Google</button>
  </div>

  <div id="main-content" style="display:none;">
    <!-- 🔐 Protected content starts -->
    <h2>Welcome to BMHHS Survey Site</h2>
    <p><a href="edit/index.html">Go to Editor</a></p>
    <button onclick="signOut()">Logout</button>
    <!-- 🔐 Protected content ends -->
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js"></script>

  <script>
    // Replace these with YOUR Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    function signIn() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider);
    }

    function signOut() {
      auth.signOut();
    }

    auth.onAuthStateChanged(user => {
      if (user) {
        // ✅ Optional whitelist (edit as needed)
        const allowed = ["youremail@gmail.com"];
        if (!allowed.includes(user.email)) {
          alert("Access denied for " + user.email);
          signOut();
          return;
        }

        document.getElementById("main-content").style.display = "block";
        document.getElementById("login-section").style.display = "none";
      } else {
        document.getElementById("main-content").style.display = "none";
        document.getElementById("login-section").style.display = "block";
      }
    });
  </script>
</body>
